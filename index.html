<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="stylesheet" type="text/css" href="css/dialog.css">
    <script>
    (function (doc, win) {
      var docEl = doc.documentElement,
          resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',
          recalc = function () {
            var clientWidth = docEl.clientWidth;
            if (!clientWidth) return;
            if(clientWidth>=750){
                docEl.style.fontSize = '50px';
            }else{
                docEl.style.fontSize = 100 * (clientWidth / 750) + 'px';
            }
          };

      if (!doc.addEventListener) return;
      win.addEventListener(resizeEvt, recalc, false);
      doc.addEventListener('DOMContentLoaded', recalc, false);
    })(document, window);
    </script>
    <title>2018聚元集团年会节目评选</title>
  </head>
  <body>
    <div class="app">
      <div class="scene" id="loading-scene" style="z-index: 6;background: #fff;"><div class="loader"></div></div>
      <div class="scene" id="scene1" style="z-index: 5;" data-page="1">
        <img src="img/title.png" class="title abs abs-h-center"></img>
        <img id="rule" src="img/rule.png" class="abs abs-h-center"></img>
        <a href="" id="start-btn" class="abs abs-h-center"><img src="img/vote-btn.png" style="width: 2.5rem;display: block;"></a>
      </div>
      <!--最受欢迎-->
      <div class="scene" id="scene2" style="z-index: 4;" data-page="2">
        
        <img id="title1" src="img/best-welcome.png" class="abs abs-h-center"></img>
        <div class="scroller abs">
          <span class="abs rect rect1"></span>
        <span class="abs rect rect2"></span>
        <span class="abs rect rect3"></span>
        <span class="abs rect rect4"></span>
        <span class="abs rect rect5"></span>
        <span class="abs rect rect6"></span>
        <span class="abs rect rect7"></span>
        <span class="abs rect rect8"></span>
        <span class="abs rect rect9"></span>
          <div class="scroller-wrap abs">
            <form id="welcomeForm">
            <ul>
              <li><input type="checkbox" name="welcome[]" id="welcome1" value="1"><label for="welcome1">1.节目一节目一节目一节目一节目一节目一节目一节目一节目一节目一节目一节目一节目一</label></li>
              <li><input type="checkbox" name="welcome[]" id="welcome2" value="2"><label for="welcome2">2.节目一节目一节目一节目一节目一节目一节目一节目一节目一</label></li>
              <li><input type="checkbox" name="welcome[]" id="welcome3"><label for="welcome3">3.节目一节目一节目一节目一节目一节目一节目一节目一</label></li>
              <li><input type="checkbox" name="welcome[]" id="welcome4"><label for="welcome4">4.节目一节目一节目一节目一节目一节目一节目一</label></li>
              <li><input type="checkbox" name="welcome[]" id="welcome5"><label for="welcome5">5.节目一节目一节目一节目一节目一节目一节目一</label></li>
              <li><input type="checkbox" name="welcome[]" id="welcome6"><label for="welcome6">6.节目一节目一节目一节目一节目一节目一节目一</label></li>
              <li><input type="checkbox" name="welcome[]" id="welcome7"><label for="welcome7">7.节目一</label></li>
              <li><input type="checkbox" name="welcome[]" id="welcome5"><label for="welcome5">5.节目一</label></li>
              <li><input type="checkbox" name="welcome[]" id="welcome6"><label for="welcome6">6.节目一</label></li>
              <li><input type="checkbox" name="welcome[]" id="welcome7"><label for="welcome7">7.节目一</label></li>
              <li><input type="checkbox" name="welcome[]" id="welcome5"><label for="welcome5">5.节目一</label></li>
              <li><input type="checkbox" name="welcome[]" id="welcome6"><label for="welcome6">6.节目一</label></li>
              <li><input type="checkbox" name="welcome[]" id="welcome7"><label for="welcome7">7.节目一</label></li>
            </ul>
            </form>
          </div>
          <a class="vote-btn" data-check="welcome"><img src="img/vode-btn-2.png"></a>
        </div>
      </div>

      <!--最佳团队-->
      <div class="scene" id="scene3" style="z-index: 3;" data-page="3">

        <img id="title2" src="img/best-team.png" class="abs abs-h-center"></img>
        <div class="scroller abs">
          <span class="abs rect rect1"></span>
        <span class="abs rect rect2"></span>
        <span class="abs rect rect3"></span>
        <span class="abs rect rect4"></span>
        <span class="abs rect rect5"></span>
        <span class="abs rect rect6"></span>
        <span class="abs rect rect7"></span>
        <span class="abs rect rect8"></span>
        <span class="abs rect rect9"></span>
          <div class="scroller-wrap abs">
            <form id="teamForm">
            <ul>
              <li><input type="checkbox" name="team[]" id="team1"><label for="team1">1.节目一</label></li>
              <li><input type="checkbox" name="team[]" id="team2"><label for="team2">2.节目一</label></li>
              <li><input type="checkbox" name="team[]" id="team3"><label for="team3">3.节目一</label></li>
              <li><input type="checkbox" name="team[]" id="team4"><label for="team4">4.节目一</label></li>
              <li><input type="checkbox" name="team[]" id="team5"><label for="team5">5.节目一</label></li>
              <li><input type="checkbox" name="team[]" id="team6"><label for="team6">6.节目一</label></li>
              <li><input type="checkbox" name="team[]" id="team7"><label for="team7">7.节目一</label></li>
              <li><input type="checkbox" name="team[]" id="team4"><label for="team4">4.节目一</label></li>
              <li><input type="checkbox" name="team[]" id="team5"><label for="team5">5.节目一</label></li>
              <li><input type="checkbox" name="team[]" id="team6"><label for="team6">6.节目一</label></li>
              <li><input type="checkbox" name="team[]" id="team7"><label for="team7">7.节目一</label></li>
            </ul>
          </form>
          </div>
          <a class="vote-btn" data-check="team"><img src="img/vode-btn-2.png"></a>
        </div>
      </div>
      

      <!--最具创意-->
      <div class="scene" id="scene4" style="z-index: 2;" data-page="4">

        <img id="title2" src="img/best-team.png" class="abs abs-h-center"></img>
        <div class="scroller abs">
          <span class="abs rect rect1"></span>
        <span class="abs rect rect2"></span>
        <span class="abs rect rect3"></span>
        <span class="abs rect rect4"></span>
        <span class="abs rect rect5"></span>
        <span class="abs rect rect6"></span>
        <span class="abs rect rect7"></span>
        <span class="abs rect rect8"></span>
        <span class="abs rect rect9"></span>
          <div class="scroller-wrap abs">
            <form id="creativeForm">
            <ul>
              <li><input type="checkbox" name="creative[]" id="creative1"><label for="creative1">1.节目一</label></li>
              <li><input type="checkbox" name="creative[]" id="creative2"><label for="creative2">2.节目一</label></li>
              <li><input type="checkbox" name="creative[]" id="creative3"><label for="creative3">3.节目一</label></li>
              <li><input type="checkbox" name="creative[]" id="creative4"><label for="creative4">4.节目一</label></li>
              <li><input type="checkbox" name="creative[]" id="creative5"><label for="creative5">5.节目一</label></li>
              <li><input type="checkbox" name="creative[]" id="creative6"><label for="creative6">6.节目一</label></li>
              <li><input type="checkbox" name="creative[]" id="creative7"><label for="creative7">7.节目一</label></li>
            </ul>
          </form>
          </div>
          <a class="vote-btn" data-check="creative"><img src="img/vode-btn-2.png"></a>
        </div>
      </div>

      <!--end-->
      <div class="scene" style="z-index: 1;" data-page="5">
        <img src="img/title.png" class="title abs abs-h-center"></img>
        <img src="img/thanks.png" id="thanks" class="abs abs-h-center">
      </div>

    </div>
    <style type="text/css">
        .iScrollVerticalScrollbar {
            position: absolute;
    z-index: 9999;
    width: 7px;
    bottom: 2px;
    top: 2px;
    right: 1px;
        }
        .iScrollIndicator {
            box-sizing: border-box;
    position: absolute;
    background: rgba(193, 86, 86, 0.4);
    border-radius: 3px;
    width: 100%;
        }
    </style>
    <script type="text/javascript" src="https://cdn.bootcss.com/zepto/1.2.0/zepto.min.js"></script>
    <script type="text/javascript" src="https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js"></script>
    <script type="text/javascript" src="js/iscroll.js"></script>
    <script type="text/javascript" src="js/imagesloaded.pkgd.min.js"></script>
    <script type="text/javascript" src="js/dialog.min.js"></script>
    <script type="text/javascript">
      document.addEventListener('touchmove', function(e){e.preventDefault()}, false);
      $(function() {
        var scrolls = document.querySelectorAll('.scroller-wrap')
        for(var i = 0; i < scrolls.length; i++) {
            new IScroll(scrolls[i],{
                scrollbars: 'custom',
                preventDefaultException: { tagName: /^(LABEL|INPUT|TEXTAREA|BUTTON|SELECT)$/}
            }) 
        }
      	imagesLoaded( document.body,{ background: '.scene' }, function() {
		  $('#loading-scene').remove()
		});
        var actions = {
          welcome: '1',
          creative: '1',
          team: '1'
        }
        FastClick.attach(document.body);
        
        $('.vote-btn,#start-btn').on('click', function(event) {
          event.preventDefault()
          var curScene = $(this).parents('.scene')
          if ($(this).attr('id') === 'start-btn') {
            if (curScene) {
              curScene.addClass('move')
            }
          }else if ($(this).hasClass('vote-btn')) {
            var checkboxName = $(this).attr('data-check')
            var checkeds = $('input[name="'+checkboxName+'[]"]:checked')
            if (checkeds.length < 3) {
              $(document).dialog({
                type : 'notice',
                infoText: '勾选3个节目不能少于3个',
                autoClose: 1500,
                position: 'bottom'
              });
              return false;
            } if (checkeds.length > 3) {
              $(document).dialog({
                type : 'notice',
                infoText: '勾选3个节目不能大于3个',
                autoClose: 1500,
                position: 'bottom'
              });
              return false;
            } else {
              var url = actions[checkboxName]
              if (!url)
                return
              //ajax
              console.log($('#'+checkboxName+'Form').serialize())
              var toast = $(document).dialog({
                  type : 'notice',
                  infoText: '正在提交中',
                  autoClose: 0,
                  position: 'bottom'
              });
              if (curScene) {
                    curScene.addClass('move')
                  }
              setTimeout(function () {
                  toast.update({
                      infoText: '投票成功',
                      autoClose: 1500,
                      position: 'bottom',
                      overlayShow: false
                  });
                  
              }, 1000);
              
            }
            
          }
          return false
        })


      })
    </script>
  </body>
</html>
